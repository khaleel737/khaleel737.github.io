<!doctype html><html lang=en><head><script defer src=https://analytics.eu.umami.is/script.js data-website-id=ff740bb2-f741-4bc5-975e-49691d82ef39></script><meta charset=utf-8><meta name=generator content="Hugo 0.127.0"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Max Halford"><meta property="og:url" content="https://maxhalford.github.io/blog/lca-exit-the-matrix/"><link rel=canonical href=https://maxhalford.github.io/blog/lca-exit-the-matrix/><meta property="og:url" content="https://maxhalford.github.io/blog/lca-exit-the-matrix/"><meta property="og:site_name" content="Max Halford"><meta property="og:title" content="LCA software: exit the matrix"><meta property="og:description" content="Measuring the environmental impact of a product is done using life cycle assessment (LCA). This is a methodology that breaks down a productâ€™s life cycle into stages (LCI), and measures the impact of each stage on the environment (LCIA).
There are a few pieces of LCA software to choose from. The leading ones are SimaPro, GaBi, openLCA, and Umberto. These are all proprietary software, and theyâ€™re expensive. But thereâ€™s a free and open source alternative: Brightway."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2024-06-09T00:00:00+00:00"><meta property="article:modified_time" content="2024-06-09T00:00:00+00:00"><meta property="article:tag" content="Sustainability"><meta property="article:tag" content="Python"><meta property="og:image" content="https://maxhalford.github.io/img/belle-ile.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://maxhalford.github.io/img/belle-ile.jpg"><meta name=twitter:title content="LCA software: exit the matrix"><meta name=twitter:description content="Measuring the environmental impact of a product is done using life cycle assessment (LCA). This is a methodology that breaks down a productâ€™s life cycle into stages (LCI), and measures the impact of each stage on the environment (LCIA).
There are a few pieces of LCA software to choose from. The leading ones are SimaPro, GaBi, openLCA, and Umberto. These are all proprietary software, and theyâ€™re expensive. But thereâ€™s a free and open source alternative: Brightway."><link rel=icon href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ¦†</text></svg>"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/maxhalford.github.io\/"},"articleSection":"blog","name":"LCA software: exit the matrix","headline":"LCA software: exit the matrix","description":"Measuring the environmental impact of a product is done using life cycle assessment (LCA). This is a methodology that breaks down a product\u0026rsquo;s life cycle into stages (LCI), and measures the impact of each stage on the environment (LCIA).\nThere are a few pieces of LCA software to choose from. The leading ones are SimaPro, GaBi, openLCA, and Umberto. These are all proprietary software, and they\u0026rsquo;re expensive. But there\u0026rsquo;s a free and open source alternative: Brightway.","inLanguage":"en-US","author":"Max Halford","creator":"Max Halford","publisher":"Max Halford","accountablePerson":"Max Halford","copyrightHolder":"Max Halford","copyrightYear":"2024","datePublished":"2024-06-09 00:00:00 \u002b0000 UTC","dateModified":"2024-06-09 00:00:00 \u002b0000 UTC","url":"https:\/\/maxhalford.github.io\/blog\/lca-exit-the-matrix\/","keywords":["sustainability","python"]}</script><title>LCA software: exit the matrix â€¢ Max Halford</title>
<meta property="og:title" content="LCA software: exit the matrix â€¢ Max Halford"><meta property="og:type" content="article"><meta name=description content="Measuring the environmental impact of a product is done using life cycle assessment (LCA). This is a methodology that breaks down a product&rsquo;s life cycle into stages (LCI), and measures the impact of each stage on the environment (LCIA).
There are a few pieces of LCA software to choose from. The leading ones are SimaPro, GaBi, openLCA, and Umberto. These are all proprietary software, and they&rsquo;re expensive. But there&rsquo;s a free and open source alternative: Brightway."><link rel=stylesheet href=/css/flexboxgrid-6.3.1.min.css><link rel=stylesheet href=/css/github-markdown.min.css><link rel=stylesheet href=/css/highlight/github.css><link rel=stylesheet href=/css/index.css><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=PT+Serif:wght@400;700&family=Permanent+Marker&display=swap" rel=stylesheet><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0,tags:"ams"},options:{skipHtmlTags:["script","noscript","style","textarea","pre"]}},window.addEventListener("load",e=>{document.querySelectorAll("mjx-container").forEach(function(e){e.parentElement.classList+="has-jax"})})</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></head><body><article class=post id=article><div class="row center-xs" style=text-align:left><div class="col-xs-12 col-sm-10 col-md-7 col-lg-5"><div class=header><header class=header-parts><div class="signatures site-title"><a href=/>Max Halford ãƒ„</a></div><div class=header-links><a class=header-link href=/>Blog</a>
<a class=header-link href=/links/>Links</a>
<a class=header-link href=/bio/>Bio</a></div></header></div><header class=post-header><h1 class=post-title>LCA software: exit the matrix</h1><div class="row post-desc"><div class="col-xs-12 post-desc-items"><time class=posts-line-date datetime="2024-06-09 00:00:00 UTC">2024-06-09
</time><span class=posts-line-tag>sustainability</span>
<span class=posts-line-tag>python</span></div></div></header><div class="post-content markdown-body"><p>Measuring the environmental impact of a product is done using <a href=https://en.wikipedia.org/wiki/Life-cycle_assessment>life cycle assessment</a> (LCA). This is a methodology that breaks down a product&rsquo;s life cycle into stages (<a href=https://www.wikiwand.com/en/Life-cycle_assessment#Life_cycle_inventory_(LCI)>LCI</a>), and measures the impact of each stage on the environment (<a href=https://www.wikiwand.com/en/Life-cycle_assessment#Life_cycle_impact_assessment_(LCIA)>LCIA</a>).</p><p>There are a few pieces of LCA software to choose from. The leading ones are <a href=https://simapro.com/>SimaPro</a>, <a href=https://sphera.com/life-cycle-assessment-lca-software/>GaBi</a>, <a href=https://www.openlca.org/>openLCA</a>, and <a href=https://www.ifu.com/umberto/>Umberto</a>. These are all proprietary software, and they&rsquo;re expensive. But there&rsquo;s a free and open source alternative: <a href=https://docs.brightway.dev/en/latest/>Brightway</a>.</p><p><a href=https://chris.mutel.org/>Christopher Mutel</a> (the creator of Brightway) recently left <a href=https://ecoinvent.org/>Ecoinvent</a> and is now focusing on <a href=https://www.d-d-s.ch/>DÃ©part de Sentier</a>. The latter is a non-profit that wants to make LCA more accessible to everyone. They do this through various initiatives, one of which is the development of Brightway. They just organized a <a href=https://github.com/Depart-de-Sentier/Spring-School-2024/>workshop</a>, where they shared some <a href=https://github.com/Depart-de-Sentier/Spring-School-2024/tree/main/class-materials/brightway-basics>tutorials</a>, which seem to be <a href=https://github.com/Depart-de-Sentier/Autumn-School-2022/blob/main/tutorials/datapackages/Datapackages.ipynb>rehashed</a> from a previous workshop in 2022. TheseÂ workshops seem to be academic in nature, whilst there is also <a href=https://ecoinvent.org/blog/brightcon-2023-broad-open-sustainability-community/>Brightcon</a> which is more industry focused.</p><p>More Brightway learning resources can be found online. For instance, Massimo Pizzol <a href=https://moutreach.science/2018/04/10/Teaching-experiment.html>wrote</a> some <a href=https://github.com/massimopizzol/B4B/tree/main>notebooks</a> for his students at the university of Aalborg. There&rsquo;s also <a href=https://github.com/maximikos/Brightway2_Intro/blob/master/BW2_tutorial.ipynb>this</a> comprehensive tutorial by Maximilian Koslowski.</p><hr><p>I have a confession to make: I don&rsquo;t think Brightway is a good piece of software, for several reasons.</p><p>First of all, it&rsquo;s not user-friendly. Brightway throws too many concepts in your face right from the start. This makes it difficult for people from other disciplines to get started. I&rsquo;m a data scientist, so I don&rsquo;t know what activities, nodes, exchanges, and other concepts Brightway mentions are. I just want to declare a product and get some results, which Brightway gives me a hard time with.</p><p>In my experience, good software hides the details and only shows them when they&rsquo;re needed. Brightway does the opposite: it shows you all the details right from the start, and you have to figure out which ones are important. This is not a good design. There should be abstractions that hide the complexity of the underlying model. For example, scikit-learn became everyone&rsquo;s favorite machine learning library because it abstracts just the right amount of complexity, for instance with its <code>fit</code> and <code>predict</code> methods.</p><p>Second, Brightway heavily relies on matrices. There&rsquo;s a bunch of them: the technosphere, the biosphere, and the characterization matrix. These matrices describe the inputs/outputs of different processes. There are various formulas that are applied to these matrices to calculate the environmental impact of a product. Many of these formulas seem to involve matrix inversion.</p><p>I don&rsquo;t think matrices are the right grammar for conducting an LCA. It&rsquo;s not how people think. People think in terms of processes, inputs, outputs, and impacts. They don&rsquo;t think in terms of matrices. Matrices are a mathematical abstraction that is not intuitive to most people. They should be hidden from the user. In fact, Brightway also offers an object-oriented way to run an LCA. Therefore, I don&rsquo;t understand why they even bother mentioning matrices in their documentation.</p><p>Finally, Brightway&rsquo;s reliance on matrices doesn&rsquo;t appear to be justified performance-wise. Brightway feels slow. The documentation is also sprinkled with tips on how to improve performance, which is a red flag. I&rsquo;m sure some LCAs can be hairy, but still this isn&rsquo;t fluid dynamics or finite element analysis. It&rsquo;s just a bunch of processes linked together.</p><hr><p>I&rsquo;m playing devil&rsquo;s advocate. On the one hand, I have a deep respect for people who write open source software. On the other hand, I&rsquo;m suspicious of software that comes from academia. The developer experience is close to non-existent. The people who use Brightway must be LCA experts themselves who can put up with Brightway&rsquo;s complexity. This is a shame, because LCA is a methodology that should be accessible to anyone who can write code.</p><p>There isn&rsquo;t really any credible open source alternative to Brightway. Someone mentioned <a href=https://github.com/kleis-technology/lcaac>LCA as Code</a> to me. But it&rsquo;s written in Kotlin, which closes the door to a lot of people who want to contribute. That being said, I like the declarative approach of LCA as Code&rsquo;s interface. It feels like a step in the right direction. Brightway&rsquo;s semantics are somewhat more procedural, which feels cumbersome.</p><p>In the recent workshop material, there is a <a href=https://github.com/Depart-de-Sentier/Spring-School-2024/blob/main/class-materials/brightway-basics/2%20-%20Building%20and%20using%20matrices%20in%20bw2calc.ipynb>toy notebook</a> to measure the footprint of a bike.</p><div align=center><figure style=width:90%;margin:0><img src="https://github.com/Depart-de-Sentier/Autumn-School-2022/blob/main/tutorials/datapackages/simple-graph.png?raw=true" style=box-shadow:none></figure></div><p>The example sounds rather straightforward. The bike is made of carbon fibre, which requires natural gas and emits CO2. However, the required Brightway matrix logic is overwhelming. The object-oriented approach is <a href=https://github.com/Depart-de-Sentier/Spring-School-2024/blob/main/class-materials/brightway-basics/1%20-%20The%20supply%20chain%20graph.ipynb>simpler</a>. But it&rsquo;s still too complex because it writes data to a database, which feels unnecessary. I think it could be simpler.</p><p>Here&rsquo;s a little Python framework I came up with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=kn>import</span> <span class=nn>dataclasses</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclasses.dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Input</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>process</span><span class=p>:</span> <span class=s1>&#39;Process&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>amount</span><span class=p>:</span> <span class=nb>float</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@dataclasses.dataclass</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Process</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>name</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>unit</span><span class=p>:</span> <span class=nb>str</span>
</span></span><span class=line><span class=cl>    <span class=n>inputs</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>Input</span><span class=p>]</span> <span class=o>=</span> <span class=n>dataclasses</span><span class=o>.</span><span class=n>field</span><span class=p>(</span><span class=n>default_factory</span><span class=o>=</span><span class=nb>list</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__rmul__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>:</span> <span class=nb>float</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Input</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amount</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>measure</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>unit</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>unit</span> <span class=o>==</span> <span class=n>unit</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nb>sum</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=n>inp</span><span class=o>.</span><span class=n>process</span><span class=o>.</span><span class=n>measure</span><span class=p>(</span><span class=n>unit</span><span class=p>)</span> <span class=o>*</span> <span class=n>inp</span><span class=o>.</span><span class=n>amount</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>inp</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>inputs</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span></code></pre></div><p>And here&rsquo;s how to use it:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-py data-lang=py><span class=line><span class=cl><span class=n>kgCO2e</span> <span class=o>=</span> <span class=n>Process</span><span class=p>(</span><span class=s1>&#39;CO2e&#39;</span><span class=p>,</span> <span class=s1>&#39;kgCO2e&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>natural_gas</span> <span class=o>=</span> <span class=n>Process</span><span class=p>(</span><span class=s1>&#39;Natural gas NO&#39;</span><span class=p>,</span> <span class=s1>&#39;MJ&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>carbon_fiber</span> <span class=o>=</span> <span class=n>Process</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;Carbon fiber DE&#39;</span><span class=p>,</span> <span class=s1>&#39;kg&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=mf>26.6</span> <span class=o>*</span> <span class=n>kgCO2e</span><span class=p>,</span> <span class=mf>237.3</span> <span class=o>*</span> <span class=n>natural_gas</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>bike_production</span> <span class=o>=</span> <span class=n>Process</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s1>&#39;Bike production DK&#39;</span><span class=p>,</span> <span class=s1>&#39;kg&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>[</span><span class=mf>2.5</span> <span class=o>*</span> <span class=n>carbon_fiber</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>bike_production</span><span class=o>.</span><span class=n>measure</span><span class=p>(</span><span class=s1>&#39;kgCO2e&#39;</span><span class=p>))</span>
</span></span></code></pre></div><pre tabindex=0><code>66.5
</code></pre><p>Simple, right? Granted, this just measures a point-wise carbon footprint. A more serious LCA would involve measuring the uncertainty of the results, and maybe even doing sensitivity analysis. But this is a good start because it&rsquo;s minimalistic. I&rsquo;m sure it could be extended to handle more complexity, whilst keeping the interface simple. I&rsquo;m also not worried about performance: there are many opportunities to <a href=https://docs.python.org/3/library/functools.html#functools.cache>cache</a> intermediate results. I don&rsquo;t think matrices and matrix inversion are necessary.</p><p>Brightway&rsquo;s isn&rsquo;t just useful for LCA. It also has tooling to import emission factor databases, such as <a href=https://docs.brightway.dev/en/latest/content/faq/ecoinvent.html>Ecoinvent</a> and <a href=https://doc.agribalyse.fr/documentation/utiliser-agribalyse/acces-donnees>Agribalyse</a>. In fact, I suspect that many people use Brightway solely for this purpose. I&rsquo;m sure everyone appreciates the work that went into making these databases accessible. However, knowing how over-engineered Brightway is, I wonder if there&rsquo;s a simpler way to import these databases.</p><p>I want to emphasize that I&rsquo;m not against Brightway. I&rsquo;m just trying to figure out why it&rsquo;s so complex. If there are good reasons for this, then I&rsquo;m not aware of them. I think it&rsquo;s healthy to question existing software when it doesn&rsquo;t feel good to use. This is how we make progress. A good recent example is <a href=https://github.com/karpathy/llm.c>llm.c</a>, which is an attempt by Andrej Karpathy and others to write a minimalistic alternative to PyTorch.</p><p>So what&rsquo;s next? I&rsquo;m not entirely sure. I&rsquo;m busy at <a href=https://www.carbonfact.com/>Carbonfact</a> with day-to-day operations. I don&rsquo;t think I have time to work on a new LCA framework. But we&rsquo;re going to be using Brightway for the foreseeable future. We have more and more customers who require bespoke LCAs. We also heavily rely on emission factor databases such as Ecoinvent. I hope that the Brightway community can address the concerns I raised. If not, I&rsquo;m sure someone else will eventually come up with an alternative.</p></div><script type=text/javascript>var s=document.createElement("script");s.setAttribute("src","https://utteranc.es/client.js"),s.setAttribute("repo","MaxHalford/maxhalford.github.io"),s.setAttribute("issue-term","pathname"),s.setAttribute("crossorigin","anonymous"),s.setAttribute("async",null),s.setAttribute("theme","github-light"),document.body.appendChild(s)</script><div style=display:flex;flex-direction:row;justify-content:center;align-items:center;gap:20px;margin-bottom:30px><div class=do-the-thing><div class=elevator><svg class="sweet-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" enable-background="new 0 0 100 100" height="100" width="100"><path d="M70 47.5H30c-1.4.0-2.5 1.1-2.5 2.5v40c0 1.4 1.1 2.5 2.5 2.5h40c1.4.0 2.5-1.1 2.5-2.5V50C72.5 48.6 71.4 47.5 70 47.5zm-22.5 40h-5v-25h5v25zm10 0h-5v-25h5v25zm10 0h-5V60c0-1.4-1.1-2.5-2.5-2.5H40c-1.4.0-2.5 1.1-2.5 2.5v27.5h-5v-35h35v35z"/><path d="M50 42.5c1.4.0 2.5-1.1 2.5-2.5V16l5.7 5.7c.5.5 1.1.7 1.8.7s1.3-.2 1.8-.7c1-1 1-2.6.0-3.5l-10-10c-1-1-2.6-1-3.5.0l-10 10c-1 1-1 2.6.0 3.5 1 1 2.6 1 3.5.0l5.7-5.7v24c0 1.4 1.1 2.5 2.5 2.5z"/></svg>
Back to the top</div></div><div class=subscribe><a href=http://eepurl.com/iRBqMg>Subscribe</a></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/elevator.js/1.0.1/elevator.min.js></script><script>var elementButton=document.querySelector(".elevator"),elevator=new Elevator({element:elementButton,mainAudio:"/music/elevator.mp3",endAudio:"/music/ding.mp3"})</script><style>.down-arrow{font-size:120px;margin-top:90px;margin-bottom:90px;text-shadow:0 -20px #0c1f31,0 0 #c33329;color:transparent;-webkit-transform:scaleY(.8);-moz-transform:scaleY(.8);transform:scaleY(.8)}.elevator{text-align:center;cursor:pointer;width:140px;margin:auto}.elevator:hover{opacity:.7}.elevator svg{width:40px;height:40px;display:block;margin:auto;margin-bottom:5px}</style><div class=related-content><h3 style=margin-top:10px!important;margin-bottom:10px!important>Related posts</h3><ul style=margin-top:0><li><a href=/blog/fast-poetry-pre-commit-github-actions/>Fast Poetry and pre-commit with GitHub Actions</a></li><li><a href=/blog/weighted-sampling-without-replacement/>Weighted sampling without replacement in pure Python</a></li><li><a href="https://www.youtube.com/watch?v=8RubWlhwTjg&amp;feature=youtu.be">Quelle est lâ€™empreinte Ã©cologique du Big Data? @ Toulouse Tech</a></li></ul></div></div></div></article></body></html>